<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SyncFlo</title>
  <style>
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; background: #121212; color: #e6e6e6; font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    .navbar { position: fixed; top: 0; left: 0; right: 0; height: 56px; background: #1e1e1e; border-bottom: 1px solid #2a2a2a; display: flex; align-items: center; gap: 8px; padding: 0 12px; z-index: 9999; }
    .btn { width: 36px; height: 36px; border: none; background: #2a2a2a; color: #e6e6e6; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 16px; }
    .addr { flex: 1; height: 36px; border-radius: 6px; border: 1px solid #2a2a2a; background: #1b1b1b; color: #e6e6e6; outline: none; padding: 0 12px; font-size: 14px; }
    .main { position: absolute; top: 56px; left: 0; right: 0; bottom: 0; }
    iframe { width: 100%; height: 100%; border: none; background: #0f0f0f; }
  </style>
  <script>
    (function(){
      var stack = [];
      var index = -1;
      var iframe, addr;

      function isUrl(s){
        try { var u = new URL(s); return u.protocol === 'http:' || u.protocol === 'https:'; }
        catch(e){ return (s.indexOf('.') > 0 && s.indexOf(' ') === -1); }
      }

      function navigate(url, push){
        if (!url) return;
        if (!/^https?:\/\//i.test(url)) {
          if (isUrl(url)) url = 'https://' + url; else url = 'https://www.google.com/search?q=' + encodeURIComponent(url);
        }
        if (push){
          stack = stack.slice(0, index + 1);
          stack.push(url);
          index = stack.length - 1;
        }
        iframe.src = url;
        addr.value = url;
        updateButtons();
      }

      function updateButtons(){
        document.getElementById('back').disabled = (index <= 0);
        document.getElementById('forward').disabled = (index >= stack.length - 1);
      }

      function goHome(){
        iframe.src = 'file://' + location.pathname.replace(/\/assets\/app\.html$/, '/assets/home.html');
        addr.value = 'home://syncflo';
      }

      window.addEventListener('DOMContentLoaded', function(){
        iframe = document.getElementById('content');
        addr = document.getElementById('addr');

        document.getElementById('back').onclick = function(){ if (index > 0){ index--; iframe.src = stack[index]; addr.value = stack[index]; updateButtons(); } };
        document.getElementById('forward').onclick = function(){ if (index < stack.length - 1){ index++; iframe.src = stack[index]; addr.value = stack[index]; updateButtons(); } };
        document.getElementById('refresh').onclick = function(){ iframe.contentWindow && iframe.contentWindow.location && iframe.contentWindow.location.reload(); };
        document.getElementById('home').onclick = goHome;
        document.getElementById('go').onclick = function(){ navigate(addr.value, true); };
        addr.addEventListener('keydown', function(e){ if (e.key === 'Enter'){ e.preventDefault(); navigate(addr.value, true); }});

        // 초기: 홈 표시
        goHome();
        updateButtons();
      });
    })();
  </script>
</head>
<body>
  <div class="navbar">
    <button id="back" class="btn" title="뒤로">←</button>
    <button id="forward" class="btn" title="앞으로">→</button>
    <button id="refresh" class="btn" title="새로고침">⟳</button>
    <button id="home" class="btn" title="홈">⌂</button>
    <input id="addr" class="addr" placeholder="주소 또는 검색어" />
    <button id="go" class="btn" title="이동">↵</button>
  </div>
  <div class="main">
    <iframe id="content" src="about:blank" referrerpolicy="no-referrer" sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe>
  </div>
</body>
</html>

